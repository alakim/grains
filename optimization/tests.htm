<html>
<head>
<title>Opt Unit Tests</title>
<script type="text/javascript" src="../tools/jsUnit.js"></script>
<script type="text/javascript" src="opt.js"></script>
<script type="text/javascript">
new JSUnit.Test("Подключение модуля Opt", "Configuration").run = function(){
	this.assert(typeof(Opt), "object");
}

new JSUnit.Test("Парабола 1", "Scalar optimization").run = function(){
	function F(x){
		x-=1;
		return x*x;
	}
	var eps = 0.0001;
	var dx0 = 0.05;
	var res = Opt.findMin(F, eps, new Opt.scalarIterator(0, dx0));
	var expectedMin = 1;
	this.assert(res.min>(expectedMin-eps*100) && res.min<(expectedMin+eps*100), true, "res.min = "+res.min);
	this.assert(res.steps<Opt.maxIterations, true, "Превышен лимит итераций: "+res.steps);
}

new JSUnit.Test("Парабола 2", "Scalar optimization").run = function(){
	function F(x){
		x+=4;
		return x*x * 0.3;
	}
	var eps = 0.0001;
	var dx0 = 1;
	var res = Opt.findMin(F, eps, new Opt.scalarIterator(0, dx0));
	var expectedMin = -4;
	this.assert(res.min>(expectedMin-eps*100) && res.min<(expectedMin+eps*100), true, "res.min = "+res.min);
	this.assert(res.steps<Opt.maxIterations, true, "Превышен лимит итераций: "+res.steps);
}


function init(){
	document.getElementById("versionPanel").innerHTML = Opt.version;
	JSUnit.init();
}
</script>
</head>
<body onload="init()">
	<h1>Opt Unit Tests</h1>
	<p>Методы численной оптимизации.</p>
	<p>Opt v.<span id="versionPanel"></span></p>
	<div id="testContainer" style="display:none;"></div>
	<div id="out"></div>
</body>
</html>