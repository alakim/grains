<html>
<head>
<title>JSVG Map Demo</title>
<script type="text/javascript" src="../lib/raphael-min.js"></script>
<script type="text/javascript" src="jsvg.js"></script>
<script type="text/javascript">
	function highlightNode(on){
		return function(nd){
			return function(e){nd.attr("opacity", on?0.5:1);};
		};
	}
	
	function clickRegion(nd){
		return function(){alert(nd.id+" clicked!")};
	}
	
	function init(){
		document.getElementById("version").innerHTML = JSVG.version;
		
		with(new JSVG.Paper(20, 120, 200, 200)){
			g(
				{
					id:"region1",
					style:"cursor:pointer;",
					events:{
						mouseover:highlightNode(true),
						mouseout:highlightNode(false),
						click:clickRegion
					}
				},
				// Из-за проблем с обработкой событий во вложенных группах, два тега path не объединяем в группу,
				// а просто копируем в стиль группы в каждый из них
				path({
					style:"fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1",
					d:"M 15.152288,83.327381 47.47717,72.720779 62.124382,93.933983 43.941636,118.68272 15.152288,83.327381 z"
				}),
				path({
					style:"fill:#00ff00;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1",
					d:"m 28.284271,57.063415 0,11.111678 33.335034,1.010152 -11.616754,-16.667517 -21.71828,4.545687 z"
				}),
				// В отличие от настоящего SVG, в этой версии jSvg не поддерживается tspan, а все прописывается в теге text. 
				// Это необходимо для корректной обработки событий
				text({x:26, y:90, style:"font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:100%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Arial;-inkscape-font-specification:Arial"},
					"abc"
				)
			),
			g(
				{
					id:"region2",
					style:"cursor:pointer;",
					events:{
						mouseover:highlightNode(true),
						mouseout:highlightNode(false),
						click:clickRegion
					}
				},
				path({
					d:"M 82.327432,82.317228 91.923882,114.64211 137.88582,98.479669 123.74369,87.367991 82.327432,82.317228 z",
					style:"fill:#8080ff;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
				}),
				path({
					d:"M 82.327432,82.317228 91.923882,114.64211 137.88582,98.479669 123.74369,87.367991 82.327432,82.317228 z",
					style:"fill:#8080ff;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1",
					transform:{
						translate:{x:20, y:12}
					}
				}),
				text({x:90, y:95, style:"font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:100%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Arial;-inkscape-font-specification:Arial"},
					"def"
				)
			),
			g(
				path({
					d:"M 62.629458,120.19795 31.314729,143.93653 169.70563,144.44161 62.629458,120.19795 z",
					style:"fill:#ff9955;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
				}),
				text({x:56, y:132, style:"font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:100%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Arial;-inkscape-font-specification:Arial"},
					"ghi"
				)
			)
		}
	}
</script>	
</head>
<body onload="init()">
	<h1>JSVG Map Demo</h1>
	<p>Пример отображения анимированной карты с использованием jSvg.</p>
	<p style="font-style:italic;">См. также комментарии в коде.</p>
	<div style="margin-top:400px;">
		<hr/>
		<p style="font-size:80%; text-align:center;">Using JSVG v.<span id="version"></span></p>
	</div>
</body>
</html>