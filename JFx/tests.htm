<html>
<head>
<title>JFx Unit Tests</title>
<script type="text/javascript" src="../tools/jsUnit.js"></script>
<script type="text/javascript" src="jfx.js"></script>
<script type="text/javascript">
new JSUnit.Test("Подключение модуля JFx", "Configuration").run = function(){
	this.assert(typeof(JFx), "object");
}

new JSUnit.Test("Формирование простого документа", "Building Document").run = function(){
	with(JFx){
		var PersonsDoc = Schema(
			Item("Persons"),
			Item("Person", Attr("fio", 0)),
			Item("Description")
		);
	}
	with(PersonsDoc){
		var data = Persons(
			Person("Иванов", ID("iiivanov"), Description("iiivanov@mail.ru")),
			Person("Петров", Description("pppetrov@mail.ru"), {phone:"444-4444", address:"ул.3-я Строителей, д.111, кв.2223."}),
			Person("Сидоров", Description("sssidorov@mail.ru"))
		);
	}
		
	this.assert(data.length, 3);
	this.assert(data[0].length, 1);
	
	this.assert(data[0].fio, "Иванов");
	this.assert(data[0]._.type, "Person");
	this.assert(data[0]._.id, "iiivanov");
	
	this.assert(data[1].fio, "Петров");
	this.assert(data[1]._.id, null);
	this.assert(data[1].phone, "444-4444");
	this.assert(data[1].address, "ул.3-я Строителей, д.111, кв.2223.");
	
	this.assert(data[0]._.parent._.type, "Persons");
	
}


function init(){
	document.getElementById("versionPanel").innerHTML = JFx.version;
	JSUnit.init();
}
</script>
</head>
<body onload="init()">
	<h1>JFx Unit Tests</h1>
	<p>JFx v.<span id="versionPanel"></span></p>
	<div id="testContainer" style="display:none;"></div>
	<div id="out"></div>
</body>
</html>