<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
	<title>NetGraph Demo Page</title>
	<link rel="stylesheet" type="text/css" href="styles.css"/>
	<script type="text/javascript" src="lib/html.js"></script>
	<script type="text/javascript" src="lib/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="lib/raphael-min.js"></script>
	<script type="text/javascript" src="netgraph.js"></script>
	<script type="text/javascript">
		var words = "javascript actionscript vbscript ecmascript table sheet variable direction inspection, assumption integration ecma integral vegetable".split(" ");
		
		
		var grNodes = {};
		(function(){
			for(var i=0,w; w=words[i],i<words.length; i++){
				var links = getLinks(w, i+1);
				var nd = {name:w, links:links};
				grNodes[w] = nd;
			}
		})();
		function getLinks(word, idx){
			var res = [];
			for(var i=idx,w; w=words[i],i<words.length; i++){
				if(w===word) continue;
				var dist = distance3(word, w);
				res.push([w, dist]);
			}
			return res;
		}
		
		function distance0(w1, w2){
			return 80;
		}
		function distance1(w1, w2){
			return Math.abs(w1.length-w2.length) + 10;
		}
		function distance2(w1, w2){
			var dist = 1;
			for(var i=0,lt1; lt1=w1[i],i<w1.length; i++){
				for(var j=0,lt2; lt2=w2[j],j<w2.length; j++){
					if(lt1==lt2) dist+=5;
				}
			}
			dist = Math.ceil(80/(dist))+2;
			return dist;
		}
		function distance3(w1, w2){
			var res = 1;
			for(var st=0; st<(w1.length+w2.length-1); st++){
				var cnt = 0;
				for(i=0; i<w1.length; i++){
					if(w1[i]==w2[i+st]) cnt++;
				}
				if(cnt>res) res = cnt;
			}
			return Math.ceil(85/res);
		}
		
		var graph = new NetGraph(grNodes);
		graph.settings({
			nodeSize:7,
			initialDistance:80,
			displayLinks:false
		});
		$(function(){
			graph.display("out", "report");
		});
	</script>
</head>
<body>
	<h1>NetGraph Demo Page</h1>
	<div id="out" style="width:800px; height:500px;"></div>
	<div id="report" style="width:800px; height:50px;"></div>
</body>
</html>